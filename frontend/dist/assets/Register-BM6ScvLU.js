import{o as y,c as x,a as r,w as s,r as n,u as b,b as f,d as P,e as R,f as u,E as U,g as z,h as c}from"./index-5DOvWKRT.js";import{_ as C,r as E}from"./_plugin-vue_export-helper-CeHH__RJ.js";const h={class:"login-container"},q={class:"login-footer"},B={__name:"Register",setup(N){const g=b(),m=c(null),i=c(!1),o=z({username:"",nickname:"",password:"",confirmPassword:""}),_={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:50,message:"用户名长度 3-50 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码至少 6 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(p,e,a)=>{e!==o.password?a(new Error("两次输入密码不一致")):a()},trigger:"blur"}]};async function d(){if(await m.value.validate().catch(()=>!1)){i.value=!0;try{await E({username:o.username,password:o.password,nickname:o.nickname}),U.success("注册成功，请登录"),g.push("/login")}catch{}finally{i.value=!1}}}return(p,e)=>{const a=n("el-input"),t=n("el-form-item"),w=n("el-button"),v=n("el-form"),V=n("router-link"),k=n("el-card");return y(),x("div",h,[r(k,{class:"login-card"},{default:s(()=>[e[7]||(e[7]=f("h2",null,"注册账号",-1)),r(v,{ref_key:"formRef",ref:m,model:o,rules:_,onSubmit:P(d,["prevent"])},{default:s(()=>[r(t,{prop:"username"},{default:s(()=>[r(a,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=l=>o.username=l),"prefix-icon":"User",placeholder:"用户名",size:"large"},null,8,["modelValue"])]),_:1}),r(t,{prop:"nickname"},{default:s(()=>[r(a,{modelValue:o.nickname,"onUpdate:modelValue":e[1]||(e[1]=l=>o.nickname=l),"prefix-icon":"UserFilled",placeholder:"昵称（可选）",size:"large"},null,8,["modelValue"])]),_:1}),r(t,{prop:"password"},{default:s(()=>[r(a,{modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=l=>o.password=l),"prefix-icon":"Lock",type:"password",placeholder:"密码",size:"large","show-password":""},null,8,["modelValue"])]),_:1}),r(t,{prop:"confirmPassword"},{default:s(()=>[r(a,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=l=>o.confirmPassword=l),"prefix-icon":"Lock",type:"password",placeholder:"确认密码",size:"large","show-password":"",onKeyup:R(d,["enter"])},null,8,["modelValue"])]),_:1}),r(t,null,{default:s(()=>[r(w,{type:"primary",size:"large",style:{width:"100%"},loading:i.value,onClick:d},{default:s(()=>[...e[4]||(e[4]=[u(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),f("div",q,[e[6]||(e[6]=u(" 已有账号？",-1)),r(V,{to:"/login"},{default:s(()=>[...e[5]||(e[5]=[u("去登录",-1)])]),_:1})])]),_:1})])}}},F=C(B,[["__scopeId","data-v-9964c701"]]);export{F as default};
