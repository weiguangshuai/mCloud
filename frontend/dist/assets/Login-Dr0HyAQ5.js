import{o as b,c as x,a as o,w as s,r,u as U,b as p,d as h,e as C,f as d,s as L,E as z,g as B,h as c}from"./index-DtofCPvg.js";import{_ as E,u as N,l as R}from"./_plugin-vue_export-helper-Dn21ojkh.js";const S={class:"login-container"},q={class:"login-footer"},K={__name:"Login",setup(M){const f=U(),_=N(),i=c(null),a=c(!1),t=B({username:"",password:""}),g={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]};async function l(){if(await i.value.validate().catch(()=>!1)){a.value=!0;try{const e=await R(t);L(e.data.token),_.setUser(e.data.user),z.success("登录成功"),f.push("/")}catch{}finally{a.value=!1}}}return(w,e)=>{const m=r("el-input"),n=r("el-form-item"),v=r("el-button"),y=r("el-form"),k=r("router-link"),V=r("el-card");return b(),x("div",S,[o(V,{class:"login-card"},{default:s(()=>[e[5]||(e[5]=p("h2",null,"mCloud 私人网盘",-1)),o(y,{ref_key:"formRef",ref:i,model:t,rules:g,onSubmit:h(l,["prevent"])},{default:s(()=>[o(n,{prop:"username"},{default:s(()=>[o(m,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=u=>t.username=u),"prefix-icon":"User",placeholder:"用户名",size:"large"},null,8,["modelValue"])]),_:1}),o(n,{prop:"password"},{default:s(()=>[o(m,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=u=>t.password=u),"prefix-icon":"Lock",type:"password",placeholder:"密码",size:"large","show-password":"",onKeyup:C(l,["enter"])},null,8,["modelValue"])]),_:1}),o(n,null,{default:s(()=>[o(v,{type:"primary",size:"large",style:{width:"100%"},loading:a.value,onClick:l},{default:s(()=>[...e[2]||(e[2]=[d(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),p("div",q,[e[4]||(e[4]=d(" 还没有账号？",-1)),o(k,{to:"/register"},{default:s(()=>[...e[3]||(e[3]=[d("立即注册",-1)])]),_:1})])]),_:1})])}}},j=E(K,[["__scopeId","data-v-841b6756"]]);export{j as default};
